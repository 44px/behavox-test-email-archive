webpackJsonp([0],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(101),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n(102),t.default={template:i.default}},101:function(e,t){e.exports="<div class=app layout=column> <md-toolbar> <div class=md-toolbar-tools> <h3> <a ui-sref=emails.search> Emails Archive </a> </h3> </div> </md-toolbar> <md-content class=app__container flex layout=row layout-padding> <div ui-view flex></div> </md-content> </div> "},102:function(e,t){},104:function(e,t){},105:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=a(i),o=n(106),l=a(o),u=n(107),s=a(u),c=n(109),d=a(c),m=n(111),f=a(m),p=n(113),g=a(p);t.default=r.default.module("app.emails",[]).factory("Emails",l.default).component("emailsSearchFilters",s.default).component("emailsSearchList",d.default).component("emailsSearchPage",f.default).component("emailViewPage",g.default).config(["$stateProvider",function(e){e.state("emails",{abstract:!0,url:""}).state("emails.search",{url:"/search",component:"emailsSearchPage"}).state("emails.view",{url:"/view/:id",params:{id:{type:"int"}},resolve:{email:["Emails","$stateParams",function(e,t){return e.get(t.id)}]},component:"emailViewPage"})}]).name},106:function(e,t,n){"use strict";function a(e,t){function n(){return e.get(r,{cache:!0}).then(function(e){return e.data.map(function(e,t){return Object.assign({},e,{id:t})})})}function a(){return n().then(function(e){var t={};return e.forEach(function(e){t[e.from]=!0,["to","cc","bcc"].forEach(function(n){e[n].forEach(function(e){t[e]=!0})})}),Object.keys(t)})}function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=n;if(""!==e.q){var i=e.q.toLowerCase();a=a.filter(function(e){return e.subject.toLowerCase().includes(i)||e.body.toLowerCase().includes(i)})}return e.users.length&&(a=a.filter(function(t){return e.users.includes(t.from)||t.to.some(function(t){return e.users.includes(t)})||t.cc.some(function(t){return e.users.includes(t)})||t.bcc.some(function(t){return e.users.includes(t)})})),t.paginate(e,a)}var r="https://raw.githubusercontent.com/44px/behavox-test-email-archive/master/data.json";return{search:function(e){return n().then(function(t){return i(e,t)})},get:function(e){return n().then(function(t){var n=t.find(function(t){return t.id===e});if(!n)throw new Error("Not found");return n})},searchUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a().then(function(t){if(""===e)return t;var n=e.toLowerCase();return t.filter(function(e){return e.toLowerCase().includes(n)})})},getInitialQuery:function(){return{q:"",users:[],page:1,perPage:t.getPageSizes()[0]}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,a.$inject=["$http","Pagination"]},107:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=this;t.searchUsers=function(t){return e.searchUsers(t)},t.$onChanges=function(e){e.query.currentValue&&(t.model={q:t.query.q,users:t.query.users})}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),o=(a(r),n(108)),l=a(o);i.$inject=["Emails"],t.default={bindings:{query:"<",onChange:"&"},controller:i,template:l.default}},108:function(e,t){e.exports='<form class=emails-search-filters ng-submit="$ctrl.onChange({query: $ctrl.model})"> <md-whiteframe class=md-whiteframe-1dp layout=column layout-padding> <md-input-container class=md-block> <label>Search by subject or body text</label> <input ng-model=$ctrl.model.q /> </md-input-container> <md-chips ng-model=$ctrl.model.users md-autocomplete-snap md-require-match=true> <md-autocomplete md-selected-item=$ctrl.userAutocomplete.selectedUser md-search-text=$ctrl.userAutocomplete.searchText md-items="item in $ctrl.searchUsers($ctrl.userAutocomplete.searchText)" md-item-text=item placeholder="Filter by users"> <md-item-template> <span md-highlight-text=$ctrl.userAutocomplete.searchText>{{item}}</span> </md-item-template> <md-not-found> No matches found. </md-not-found> </md-autocomplete> </md-chips> <div layout=row layout-align=end> <md-button class="md-raised md-primary" type=submit> Search </md-button> </div> </md-whiteframe> </form> '},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(110),i=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={bindings:{data:"<",query:"<",onChange:"&"},template:i.default}},110:function(e,t){e.exports='<div class=emails-search-list> <md-list flex> <md-list-item class="md-3-line md-long-text" ng-repeat="email in $ctrl.data.items track by email.id" ui-sref="emails.view({id: email.id})"> <div class=md-list-item-text> <h3 ng-bind="email.subject || \'No subject\'"></h3> <h4> <strong>From:</strong> <span ng-bind=email.from></span> </h4> <h4> <strong>To:</strong> <span ng-bind="email.to | arrayToString"></span> </h4> <p ng-bind="email.body | limitTo:200"></p> </div> </md-list-item> </md-list> <div ng-if=!$ctrl.data.items.length> No results found </div> <pagination query=$ctrl.query total-pages=$ctrl.data.totalPages on-change="$ctrl.onChange({query: query})"> </pagination> </div> '},111:function(e,t,n){"use strict";function a(e,t){function n(t){a.dataLoading=!0,e.search(t).then(function(e){a.data=e}).finally(function(){a.dataLoading=!1})}var a=this;a.onQueryChange=function(e){a.query=t.getUpdatedQuery(a.query,e),n(a.query)},a.$onInit=function(){a.onQueryChange(e.getInitialQuery())}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(112),r=function(e){return e&&e.__esModule?e:{default:e}}(i);a.$inject=["Emails","Pagination"],t.default={controller:a,template:r.default}},112:function(e,t){e.exports='<div class=emails-search-page layout=column> <emails-search-filters query=$ctrl.query on-change=$ctrl.onQueryChange(query)> </emails-search-filters> <div layout=row layout-padding=10 layout-align="center center" ng-if=$ctrl.dataLoading> <md-progress-circular md-mode=indeterminate></md-progress-circular> </div> <emails-search-list ng-if=!$ctrl.dataLoading data=$ctrl.data query=$ctrl.query on-change=$ctrl.onQueryChange(query)> </emails-search-list> </div> '},113:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(114),i=function(e){return e&&e.__esModule?e:{default:e}}(a);n(115),t.default={bindings:{email:"<"},template:i.default}},114:function(e,t){e.exports='<div class=email-view-page> <div class=email-view-page__header> <div class=email-view-page__property> <span class=email-view-page__label>From:</span> <span ng-bind=::$ctrl.email.from></span> </div> <div class=email-view-page__property> <span class=email-view-page__label>To:</span> <span ng-bind="::$ctrl.email.to | arrayToString"></span> </div> <div class=email-view-page__property> <span class=email-view-page__label>Cc:</span> <span ng-bind="::$ctrl.email.cc | arrayToString"></span> </div> <div class=email-view-page__property> <span class=email-view-page__label>Bcc:</span> <span ng-bind="::$ctrl.email.bcc | arrayToString"></span> </div> <div class=email-view-page__property> <span class=email-view-page__label>Subject:</span> <span ng-bind=::$ctrl.email.subject></span> </div> </div> <div class=email-view-page__body ng-bind=::$ctrl.email.body> </div> </div> '},115:function(e,t){},58:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var i=n(7),r=a(i),o=n(60),l=a(o),u=n(105),s=a(u);r.default.module("app",[l.default,s.default]).config(["$compileProvider",function(e){e.debugInfoEnabled(!1),e.commentDirectivesEnabled(!1),e.cssClassDirectivesEnabled(!1)}])},60:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),r=a(i),o=n(61),l=a(o),u=n(90),s=a(u),c=n(96),d=a(c),m=n(97),f=a(m),p=n(98),g=a(p),v=n(100),h=a(v);n(104),t.default=r.default.module("app.core",[s.default,l.default]).factory("Pagination",d.default).filter("arrayToString",f.default).component("pagination",g.default).component("app",h.default).config(["$urlServiceProvider",function(e){e.rules.otherwise({state:"emails.search"})}]).name},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=[10,50,100];return{getPageSizes:function(){return e},getUpdatedQuery:function(e,t){var n=Object.keys(t).some(function(e){return"page"!==e});return Object.assign({},e,t,{page:n?1:t.page})},paginate:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Math.max(1,t.page),i=t.perPage||e[0],r=(a-1)*i;return{items:n.slice(r,r+i),totalPages:Math.ceil(n.length/i)}}}}},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).join(", ")}}},98:function(e,t,n){"use strict";function a(e){var t=this;t.onPageChange=function(e){return t.onChange({query:{page:e}})},t.onPageSizeChange=function(e){return t.onChange({query:{perPage:e}})},t.$onInit=function(){t.pageSizes=e.getPageSizes()},t.$onChanges=function(){t.selectedPageSize=t.query.perPage}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(99),r=function(e){return e&&e.__esModule?e:{default:e}}(i);a.$inject=["Pagination"],t.default={bindings:{query:"<",totalPages:"<",onChange:"&"},controller:a,template:r.default}},99:function(e,t){e.exports='<div class=pagination layout=row layout-align="space-between center" flex> <md-button ng-disabled="$ctrl.query.page === 1" ng-click="$ctrl.onPageChange($ctrl.query.page - 1)"> Prev page </md-button> <md-select class=md-no-underline ng-model=$ctrl.selectedPageSize ng-change=$ctrl.onPageSizeChange($ctrl.selectedPageSize)> <md-option ng-repeat="pageSize in $ctrl.pageSizes" value="{{ pageSize }}"> {{ pageSize }} per page </md-option> </md-select> <md-button ng-disabled="$ctrl.query.page === $ctrl.totalPages" ng-click="$ctrl.onPageChange($ctrl.query.page + 1)"> Next page </md-button> </div> '}},[58]);