<form class="emails-search-filters"
      ng-submit="$ctrl.onChange({query: $ctrl.model})">
    <md-whiteframe class="md-whiteframe-1dp"
                   layout="column"
                   layout-padding>
        <md-input-container class="md-block">
            <label>Search by subject or body text</label>
            <input ng-model="$ctrl.model.q" />
        </md-input-container>

        <md-chips ng-model="$ctrl.model.users"
                  md-autocomplete-snap
                  md-require-match="true">
            <md-autocomplete md-selected-item="$ctrl.userAutocomplete.selectedUser"
                             md-search-text="$ctrl.userAutocomplete.searchText"
                             md-items="item in $ctrl.searchUsers($ctrl.userAutocomplete.searchText)"
                             md-item-text="item"
                             placeholder="Filter by users">
                <md-item-template>
                    <span md-highlight-text="$ctrl.userAutocomplete.searchText">{{item}}</span>
                </md-item-template>
                <md-not-found>
                    No matches found.
                </md-not-found>
            </md-autocomplete>
        </md-chips>

        <div layout="row"
             layout-align="end">
            <md-button class="md-raised md-primary"
                       type="submit">
                Search
            </md-button>
        </div>
    </md-whiteframe>
</form>
